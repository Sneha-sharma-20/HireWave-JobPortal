<h2>My Applications</h2>

<% if @applications.count == 0 %>
  <div class="card">
    <p>You haven't applied to any jobs yet. <a href="/">Browse available jobs</a></p>
  </div>
<% else %>
  <% @applications.each do |app| %>
    <div class="job-card">
      <h3><%= app['title'] %></h3>
      <div class="company"><%= app['company'] %></div>
      <div class="meta">
        <% if app['location'] %>
          ğŸ“ <%= app['location'] %>
        <% end %>
        | Applied: <%= Time.parse(app['applied_at']).strftime('%B %d, %Y') %>
        | Status: <span style="color: #f39c12; font-weight: bold;"><%= app['status'].upcase %></span>
      </div>
      <% if app['cover_letter'] && !app['cover_letter'].empty? %>
        <div class="description">
          <strong>Cover Letter:</strong> <%= app['cover_letter'][0..150] %><%= app['cover_letter'].length > 150 ? '...' : '' %>
        </div>
      <% end %>
      <a href="/jobs/<%= app['job_id'] %>" class="btn">View Job</a>
    </div>
  <% end %>
<% end %>